<!DOCTYPE html>
<html>
<head>
    <title>pronhub</title>
    <style>
        body, html {
            font-family: 'Arial', sans-serif;
            background: #f4f4f4;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100%;
            margin: 0;
        }
        .pos-container {
    width: 90%;
    max-width: 900px;
    background: white;
    border-radius: 10px;
    box-shadow: 0 0 10px rgba(0,0,0,0.2);
    padding: 20px;
    height: 110vh; 
    display: flex;
    flex-direction: column;
    overflow: hidden;
}
        .header {
            text-align: center;
            margin-bottom: 20px;
        }
        .header h2 {
            margin: 0;
            color: #333;
        }
        .form-group {
            margin-bottom: 15px;
            width: 99%;
        }
        label {
            font-weight: bold;
        }
        #loadContainer {
            height: 600px; 
            overflow-y: auto; /* Ensure scrolling when content overflows */
        }
        .load-section {
            border: 1px solid #ddd;
            padding: 15px;
            margin-bottom: 15px;
            border-radius: 10px;
            position: relative;
            background: #f9f9f9;
        }
        .load-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .remove-load-btn {
            background: #ff4d4d;
            color: white;
            border: none;
            padding: 5px 10px;
            cursor: pointer;
            border-radius: 5px;
            font-size: 12px;
        }
        .remove-load-btn:hover {
            background: #cc0000;
        }
        .service-group, .additional-group {
            display: flex;
            justify-content: space-around;
            flex-wrap: wrap;
        }
        .service, .additional {
            padding: 5px 15px;
            margin: 5px;
            background-color: #d1ecf1;
            border: 1px solid #bee5eb;
            border-radius: 5px;
            cursor: pointer;
        }
        .selected {
            background-color: #28a745 !important;
            color: white;
        }
        .disabled {
            background-color: #ccc !important;
            cursor: not-allowed;
        }
        select, input {
            padding: 10px;
            border-radius: 5px;
            width: 90%;
            margin-top: 5px;
        }
        .add-load-btn {
            display: block;
            width: 100%;
            padding: 15px;
            background: #28a745;
            color: white;
            border: none;
            cursor: pointer;
            border-radius: 5px;
            margin-top: 20px;
        }
        .add-load-btn:hover {
            background: #218838;
        }
        .btn-submit {
            width: 100%;
            padding: 15px;
            background: #007bff;
            color: white;
            border: none;
            cursor: pointer;
            border-radius: 5px;
            margin-top: 20px;
        }
        .btn-submit:hover {
            background: #0056b3;
        }
        .total-section {
            margin-top: 20px;
            padding: 15px;
            background: #f1f1f1;
            border-radius: 5px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .total-section label {
            font-size: 18px;
        }
        .summary-section {
    background: #f9f9f9;
    border-radius: 5px;
    padding: 15px;
    margin-top: 20px;
    max-height: 900px; 
    overflow-y: auto;
}
        .summary-item {
            display: flex;
            justify-content: space-between;
            padding: 5px 0;
        }
        .summary-item label {
            font-size: 14px;
            color: #333;
        }
    </style>
</head>
<body>
    <div class="pos-container">
        <div class="header">
            <h2>niggang naka crocs</h2>
        </div>

        <!-- Received By Section -->
        <div class="form-group">
            <label>Received By</label>
            <select id="receivedBy">
                <option value="Person 1">jhessa</option>
                <option value="Person 2">argie</option>
                <option value="Person 3">lourdes</option>
                <option value="Person 4">saltik-sintosinto-abduljabar</option>
                <option value="Person 5">troy</option>
            </select>
        </div>

        <!-- Customer Details Section -->
        <div class="form-group">
            <label>Customer Name</label>
            <input type="text" id="customerName">
        </div>
        <div class="form-group">
            <label>Address</label>
            <input type="text" id="address">
        </div>

        <!-- Dynamic Load Sections Container -->
        <div id="loadContainer">
            <!-- First Load Section (Default) -->
            <div class="load-section" id="load-1">
                <div class="load-header">
                    <h4>Load 1</h4>
                </div>
                <div class="form-group">
                    <label>Select Service</label>
                    <div class="service-group">
                        <div class="service" data-service="Washing" data-price="55">Washing</div>
                        <div class="service" data-service="Drying" data-price="60">Drying</div>
                        <div class="service" data-service="Wash & Dry" data-price="115">Wash & Dry</div>
                        <div class="service" data-service="Wash & Dry + Fold" data-price="169">Wash & Dry + Fold</div>
                        <div class="service" data-service="Full Service" data-price="169">Full Service</div>
                        <div class="service" data-service="Premium" data-price="199">Premium</div>
                    </div>
                </div>
                <div class="form-group">
                    <label>Additional Services</label>
                    <div class="additional-group">
                        <div class="additional" data-service="Spin" data-price="20">Spin</div>
                        <div class="additional" data-service="Rinse & Spin" data-price="30">Rinse & Spin</div>
                        <div class="additional" data-service="Extend Dry" data-price="10">Extend Dry</div>
                        <div class="additional" data-service="Fold" data-price="30">Fold</div>
                        <div class="additional" data-service="Rush" data-price="30">Rush</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Add Load Button -->
        <button class="add-load-btn" id="addLoadBtn">Add Load +</button>

        <!-- Summary Section -->
        <div class="summary-section" id="summarySection">
            <h4>Summary of Services</h4>
            <div id="summaryContent"></div>
        </div>

        <!-- Total Price and Payment Section -->
        <div class="total-section">
            <label>Total Price: <span id="totalPrice">0</span> Pesos</label>
            <label>Payment Received: <input type="number" id="paymentReceived" min="0"></label>
            <label>Change: <span id="change">0</span> Pesos</label>
        </div>

        <!-- Submit Button -->
        <button class="btn-submit" onclick="submitOrder()">Submit Order</button>
    </div>

    <script>
        let loadCount = 1;  // Initial Load Count

        // Function to add a new load section
        function addLoad() {
            loadCount++;
            const loadContainer = document.getElementById('loadContainer');
            const newLoad = document.createElement('div');
            newLoad.classList.add('load-section');
            newLoad.id = `load-${loadCount}`;
            newLoad.innerHTML = `
                <div class="load-header">
                    <h4>Load ${loadCount}</h4>
                    <button class="remove-load-btn" onclick="removeLoad(${loadCount})">Remove Load</button>
                </div>
                <div class="form-group">
                    <label>Select Service</label>
                    <div class="service-group">
                        <div class="service" data-service="Washing" data-price="55">Washing</div>
                        <div class="service" data-service="Drying" data-price="60">Drying</div>
                        <div class="service" data-service="Wash & Dry" data-price="115">Wash & Dry</div>
                        <div class="service" data-service="Wash & Dry + Fold" data-price="169">Wash & Dry + Fold</div>
                        <div class="service" data-service="Full Service" data-price="169">Full Service</div>
                        <div class="service" data-service="Premium" data-price="199">Premium</div>
                    </div>
                </div>
                <div class="form-group">
                    <label>Additional Services</label>
                    <div class="additional-group">
                        <div class="additional" data-service="Spin" data-price="20">Spin</div>
                        <div class="additional" data-service="Rinse & Spin" data-price="30">Rinse & Spin</div>
                        <div class="additional" data-service="Extend Dry" data-price="10">Extend Dry</div>
                        <div class="additional" data-service="Fold" data-price="30">Fold</div>
                        <div class="additional" data-service="Rush" data-price="30">Rush</div>
                    </div>
                </div>
            `;
            loadContainer.appendChild(newLoad);
            bindServiceListeners();
        }

        // Function to remove a load section
        function removeLoad(loadId) {
            const loadToRemove = document.getElementById(`load-${loadId}`);
            loadToRemove.remove();
            calculateTotal();
        }

        // Function to handle service and additional selection
        function bindServiceListeners() {
            document.querySelectorAll('.service').forEach(serviceBtn => {
                serviceBtn.addEventListener('click', () => {
                    const loadSection = serviceBtn.closest('.load-section');
                    loadSection.querySelectorAll('.service').forEach(btn => btn.classList.remove('selected'));
                    serviceBtn.classList.add('selected');
                    handleAdditionalServices(serviceBtn);  // Handle additional services based on selected service
                    calculateTotal();
                });
            });

            document.querySelectorAll('.additional').forEach(additionalBtn => {
                additionalBtn.addEventListener('click', () => {
                    // If the button is disabled, don't allow it to be toggled
                    if (additionalBtn.classList.contains('disabled')) return;

                    const loadSection = additionalBtn.closest('.load-section');
                    const selectedService = loadSection.querySelector('.service.selected');

                    // If "Spin" is pressed, disable "Rinse & Spin", and vice versa
                    if (additionalBtn.dataset.service === "Spin") {
                        const rinseSpinBtn = loadSection.querySelector('.additional[data-service="Rinse & Spin"]');
                        if (additionalBtn.classList.contains('selected')) {
                            rinseSpinBtn.classList.remove('disabled');
                        } else {
                            rinseSpinBtn.classList.add('disabled');
                            rinseSpinBtn.classList.remove('selected');
                        }
                    } else if (additionalBtn.dataset.service === "Rinse & Spin") {
                        const spinBtn = loadSection.querySelector('.additional[data-service="Spin"]');
                        if (additionalBtn.classList.contains('selected')) {
                            spinBtn.classList.remove('disabled');
                        } else {
                            spinBtn.classList.add('disabled');
                            spinBtn.classList.remove('selected');
                        }
                    }

                    additionalBtn.classList.toggle('selected');
                    calculateTotal();
                });
            });
        }

        // Handle additional services when a specific service is selected
        function handleAdditionalServices(serviceBtn) {
            const loadSection = serviceBtn.closest('.load-section');
            const additionalBtns = loadSection.querySelectorAll('.additional');
            const service = serviceBtn.dataset.service;

            // Reset additional services
            additionalBtns.forEach(btn => {
                btn.classList.remove('selected');
                btn.classList.remove('disabled');
            });

            // If "Washing" or "Drying" is selected, select only "Spin"
            if (["Washing", "Drying"].includes(service)) {
                const spinBtn = loadSection.querySelector('.additional[data-service="Spin"]');
                spinBtn.classList.add('selected');
                const rinseSpinBtn = loadSection.querySelector('.additional[data-service="Rinse & Spin"]');
                rinseSpinBtn.classList.add('disabled');
                rinseSpinBtn.classList.remove('selected');
            }

            // If "Wash & Dry + Fold", "Full Service", or "Premium" is selected, disable "Spin" and "Rinse & Spin"
            if (["Wash & Dry + Fold", "Full Service", "Premium"].includes(service)) {
                const spinBtn = loadSection.querySelector('.additional[data-service="Spin"]');
                const rinseSpinBtn = loadSection.querySelector('.additional[data-service="Rinse & Spin"]');
                spinBtn.classList.add('disabled');
                rinseSpinBtn.classList.add('disabled');
            }
        }

        // Function to calculate total price and update summary
        function calculateTotal() {
            let total = 0;
            const summaryContent = document.getElementById('summaryContent');
            summaryContent.innerHTML = '';  // Clear previous summary

            // Calculate service price and create summary
            document.querySelectorAll('.load-section').forEach(loadSection => {
                const selectedService = loadSection.querySelector('.service.selected');
                const selectedAdditionals = loadSection.querySelectorAll('.additional.selected');
                const loadTitle = loadSection.querySelector('h4').innerText;

                if (selectedService) {
                    const servicePrice = parseFloat(selectedService.dataset.price);
                    total += servicePrice;
                    let summaryItem = `<div class="summary-item"><label>${loadTitle} - ${selectedService.innerText}</label><label>${servicePrice} Pesos</label></div>`;
                    
                    // Append additional services to summary
                    selectedAdditionals.forEach(additional => {
                        const additionalPrice = parseFloat(additional.dataset.price);
                        total += additionalPrice;
                        summaryItem += `<div class="summary-item"><label>+ ${additional.innerText}</label><label>${additionalPrice} Pesos</label></div>`;
                    });

                    summaryContent.innerHTML += summaryItem;
                }
            });

            // Update total price
            document.getElementById('totalPrice').innerText = total;
            calculateChange();  // Recalculate change whenever total is updated
        }

        // Function to calculate change
        function calculateChange() {
            const payment = parseFloat(document.getElementById('paymentReceived').value) || 0;
            const total = parseFloat(document.getElementById('totalPrice').innerText);
            document.getElementById('change').innerText = payment - total;
        }

        // Function to submit the order
        function submitOrder() {
            alert('wala pa nga e pindot ka ng pindot');
            // Add your order submission logic here (e.g., sending data to a server)
        }

        // Initial binding of service listeners
        bindServiceListeners();

        // Add event listener for the add load button
        document.getElementById('addLoadBtn').addEventListener('click', addLoad);

        // Add event listener for payment received input
        document.getElementById('paymentReceived').addEventListener('input', calculateChange);
    </script>
</body>
</html>
